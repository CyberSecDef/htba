# Target: 10.129.63.172

## Goals

### Goal 1 - User Flag
    a3c1cc58144071a720ebeab984da076b

### Goal 2 - Root Flag
    872a2609a68c5c225af20026cd0c8f70

## Walkthrough

- Browsed to IP, redirected to monitorsfour.htb
- Added ip - hostname mapping to /etc/hosts
- Browsed to site, got networking solutions web site
    the only link on the page is to the login page
    the login page has a username/password input form.
    the form posts to an api endpoint "/api/v1/auth"
    there is a forgot password link
    the reset password link also posts to api endpoint "/api/v1/reset"
    no create account page found.  login requires credentials.  reset requires valid email on existing account.
- Browsed to http://monitorsfour.htb/.env, found DB creds for mariadb
- Gobuster vhosts
    found cacti redirect, added to /etc/hosts
- nikto
- whatweb
    found php 8.3.27
- dirb
    found there is a /contact page that errors out:
        Warning: include(/var/www/app/views/contact.php): Failed to open stream: No such file or directory in /var/www/app/Router.php on line 110
        Warning: include(): Failed opening '/var/www/app/views/contact.php' for inclusion (include_path='.:/usr/local/lib/php') in /var/www/app/Router.php on line 110
    found there is a /controllers directory (forbidden)
    found there is a /user page. gives missing token json error message
    found user?token=0 gives json with credentials and user infomration, passwords are hashes


    found 4 api endpoints
- attempted to login with credentials
    admin - wonderful1 fail
    marcus - wonderful1 success

- all metasplot cacti exploits failed, found cybergeek on github
- got reverse shell, which granted user flag
- determined this was a docker container, pivoted to docker manager ip
- created fake container configuration to create a new machine with access to host filesystem
- started fake container and logged the flag to stdout


## Report Generation

- We are currently working on the MonitorsFour Lab Case.  This can be found at ./cases/htb/MonitorsFour/*.  Please confirm understanding.  please only confirm understanding, we are going to run through this step by step.

- We are going to build a Penetration Test Report following the format in ./media/pentest_report_template.md.  Please make sure you read a current copy of that template and confirm you understand.

- Generate a robust and technical a report as possible using the information available in the parsed log files following the parsed report template.  Make sure all report sections are created.  The details for each section are embedded in the template.  Do not fabricate any facts without stating so.  All stated facts must be labeled with references to the applicable log files detailed.  Label all sections as coming from the executed logs, or generated by expert, or industry best practice, etc.  Self generated code should also be labeled as such. Clearly distinguish between findings, analysis/expert interpreation and recomendations. Place the final report in the folder: ./cases/htb/MonitorsFour/monitorsfour_pentest_report.md